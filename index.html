
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¸€ä»½å¹³å®‰å¤œçš„ç‰¹åˆ«é‚€çº¦</title>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Zhi+Mang+Xing&family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --emerald-deep: #013220;
            --gold-primary: #D4AF37;
            --gold-light: #F7EF8A;
            --velvet-red: #8B0000;
            --pink-warm: #FFC0CB;
            --champagne: #F7E7CE;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            font-family: 'Noto Serif SC', serif;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 1.5s ease-in-out;
            position: relative;
        }

        body.bg-invite {
            background: linear-gradient(145deg, var(--emerald-deep), #000);
        }

        body.bg-success {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        }

        /* çº¸å¼ çº¹ç† */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            opacity: 0.04;
            z-index: 1;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        /* å¡ç‰‡å®¹å™¨ */
        #container {
            position: relative;
            z-index: 10;
            width: 90%;
            max-width: 500px;
            perspective: 1000px;
            transition: all 1s ease;
        }

        .card-gold-edge {
            padding: 4px;
            border-radius: 40px;
            background: linear-gradient(135deg, var(--gold-primary), var(--gold-light), var(--gold-primary));
            box-shadow: 0 25px 70px rgba(0,0,0,0.7);
        }

        .card-velvet {
            background: radial-gradient(circle at center, #A50000 0%, #8B0000 70%, #4d0000 100%);
            border-radius: 36px;
            padding: 40px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
            min-height: 600px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* å¤å¤è£…é¥° */
        .ornament {
            position: absolute;
            color: var(--gold-primary);
            opacity: 0.5;
            font-size: 24px;
            user-select: none;
        }
        .orn-tl { top: 20px; left: 20px; }
        .orn-tr { top: 20px; right: 20px; transform: rotate(90deg); }
        .orn-bl { bottom: 20px; left: 20px; transform: rotate(-90deg); }
        .orn-br { bottom: 20px; right: 20px; transform: rotate(180deg); }

        /* æ‹ç«‹å¾—ç›¸æ¡† */
        .polaroid {
            background: white;
            padding: 12px 12px 40px 12px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.5);
            transform: rotate(-2deg);
            margin-bottom: 30px;
            border: 1px solid rgba(0,0,0,0.05);
            animation: float 5s ease-in-out infinite;
        }
        .polaroid img {
            width: 180px;
            height: 180px;
            object-fit: cover;
            display: block;
            background: #f0f0f0;
        }
        .polaroid p {
            font-family: 'Zhi Mang Xing', cursive;
            color: #333;
            margin-top: 10px;
            font-size: 20px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(-2deg); }
            50% { transform: translateY(-15px) rotate(1deg); }
        }

        /* æ ‡é¢˜æ’ç‰ˆ */
        h1 {
            font-family: 'Ma Shan Zheng', cursive;
            background: linear-gradient(to bottom, var(--gold-light), var(--gold-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.2rem;
            margin-bottom: 15px;
            letter-spacing: 4px;
            line-height: 1.2;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .message {
            font-family: 'Zhi Mang Xing', cursive;
            color: rgba(255,255,255,0.95);
            font-size: 1.25rem;
            line-height: 1.8;
            margin-bottom: 25px;
        }

        .highlight-name {
            font-size: 1.7rem;
            color: var(--gold-light);
            text-shadow: 0 0 10px rgba(212,175,55,0.8);
            margin: 0 5px;
        }

        /* å€’è®¡æ—¶ */
        .countdown-container {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 15px;
            width: 100%;
            margin-bottom: 25px;
            border: 1px solid rgba(255,255,255,0.15);
            display: flex;
            justify-content: space-around;
            color: var(--gold-primary);
        }
        .cd-item { display: flex; flex-direction: column; }
        .cd-val { font-size: 1.6rem; font-weight: bold; }
        .cd-label { font-size: 0.7rem; opacity: 0.7; text-transform: uppercase; }

        /* æŒ‰é’® */
        .button-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            align-items: center;
        }
        @media (min-width: 640px) {
            .button-group { flex-direction: row; justify-content: center; gap: 30px; }
        }

        .btn-yes {
            width: 160px;
            padding: 14px 0;
            border-radius: 50px;
            font-weight: bold;
            color: #4d0000;
            border: none;
            cursor: pointer;
            background: linear-gradient(135deg, #BF953F, #FCF6BA, #B38728, #FBF5B7, #AA771C);
            background-size: 200% 200%;
            animation: gold-breathing 4s ease-in-out infinite;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            transition: transform 0.2s;
            font-size: 1rem;
        }
        .btn-yes:active { transform: scale(0.95); }

        @keyframes gold-breathing {
            0%, 100% { background-position: 0% 50%; box-shadow: 0 0 5px rgba(212,175,55,0.4); }
            50% { background-position: 100% 50%; box-shadow: 0 0 25px rgba(212,175,55,0.9); }
        }

        .btn-no {
            width: 160px;
            padding: 14px 0;
            border-radius: 50px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(212,175,55,0.4);
            color: var(--gold-primary);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        /* çŠ¶æ€æ˜¾ç¤ºæ§åˆ¶ */
        .hidden { display: none !important; }
        #content-invite, #content-success {
            transition: opacity 0.8s ease;
            width: 100%;
        }

        .date-badge {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(212,175,55,0.2);
            color: var(--gold-primary);
            font-size: 12px;
            letter-spacing: 3px;
            opacity: 0.7;
            width: 100%;
        }

        /* é¡µè„š */
        .footer {
            position: fixed;
            bottom: 40px;
            width: 100%;
            text-align: center;
            z-index: 5;
            pointer-events: none;
        }
        .footer-quote {
            font-family: 'Zhi Mang Xing', cursive;
            color: var(--gold-light);
            opacity: 0.8;
            font-size: 1.2rem;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.6);
        }
        .footer-brand {
            color: rgba(212,175,55,0.3);
            font-size: 9px;
            letter-spacing: 6px;
            text-transform: uppercase;
        }

        /* æˆåŠŸé¡µåŠ¨æ•ˆ */
        @keyframes bounce-in {
            0% { transform: scale(0.6); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-celebrate {
            animation: bounce-in 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body class="bg-invite">
    <canvas id="bg-canvas"></canvas>
    <canvas id="effect-canvas"></canvas>

    <div id="container">
        <div class="card-gold-edge">
            <div class="card-velvet">
                <div class="ornament orn-tl">â¦</div>
                <div class="ornament orn-tr">â¦</div>
                <div class="ornament orn-bl">â¦</div>
                <div class="ornament orn-br">â¦</div>

                <!-- æ‹ç«‹å¾—ç…§ç‰‡ -->
                <div class="polaroid">
                    <img src="https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif" alt="Christmas">
                    <p>Our Christmas Eve</p>
                </div>

                <!-- é¡µé¢1: é‚€è¯· -->
                <div id="content-invite">
                    <h1>ä¸€ä»½å¹³å®‰å¤œçš„ç‰¹åˆ«é‚€çº¦</h1>
                    <div class="message">
                        <p>äº²çˆ±çš„ <span class="highlight-name">å‘¨ä½³ä¼Š</span>ï¼Œ</p>
                        <p>åœ¨è¿™ä¸ªå¹³å®‰å–œä¹çš„å¤œæ™šï¼Œ</p>
                        <p>æˆ‘ä¸æƒ³é”™è¿‡å’Œä½ åœ¨ä¸€èµ·çš„æ¯ä¸€ç§’ã€‚</p>
                        <p style="font-family:'Ma Shan Zheng', cursive; margin-top:15px; color:var(--gold-primary); font-size: 1.4rem;">ä½ æ„¿æ„æ¥å—æˆ‘çš„çº¦ä¼šé‚€è¯·å—ï¼Ÿ</p>
                    </div>

                    <div class="countdown-container" id="countdown">
                        <div class="cd-item"><span class="cd-val" id="days">0</span><span class="cd-label">å¤©</span></div>
                        <div class="cd-item"><span class="cd-val" id="hours">00</span><span class="cd-label">æ—¶</span></div>
                        <div class="cd-item"><span class="cd-val" id="mins">00</span><span class="cd-label">åˆ†</span></div>
                        <div class="cd-item"><span class="cd-val" id="secs">00</span><span class="cd-label">ç§’</span></div>
                    </div>

                    <div class="button-group">
                        <button class="btn-yes" onclick="acceptInvitation()">æˆ‘æ„¿æ„</button>
                        <button class="btn-no" id="btn-no">è€ƒè™‘ä¸€ä¸‹</button>
                    </div>

                    <div class="date-badge">ğŸ„ 12æœˆ24æ—¥ 17:20 ğŸ</div>
                </div>

                <!-- é¡µé¢2: æˆåŠŸ -->
                <div id="content-success" class="hidden">
                    <div class="animate-celebrate">
                        <div style="font-size: 80px; margin-bottom: 25px;">ğŸ’</div>
                        <h2 style="font-family:'Zhi Mang Xing', cursive; font-size: 2.8rem; color: var(--gold-light); margin-bottom: 20px;">å¤ªæ£’äº†ï¼Œä½³ä¼Šï¼</h2>
                        <p style="font-family:'Ma Shan Zheng', cursive; color: white; font-size: 1.4rem; letter-spacing: 3px; line-height: 2;">æˆ‘ä¼šå‡†æ—¶å»æ¥ä½ ï¼â¤ï¸</p>
                        <div style="margin-top: 40px; padding: 12px 25px; border-top: 1px solid var(--gold-primary); border-bottom: 1px solid var(--gold-primary); color: var(--gold-light); font-size: 1.5rem; font-family:'Ma Shan Zheng', cursive; display: inline-block;">
                            12æœˆ24æ—¥ 17:20 è§
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p class="footer-quote">æ‰€æœ‰çš„å‡†å¤‡ï¼Œåªä¸ºåšä½ ä¸€ç¬‘ã€‚â¤ï¸</p>
        <p class="footer-brand">Celestial Christmas for Jia Yi</p>
    </div>

    <script>
        const bgCanvas = document.getElementById('bg-canvas');
        const effCanvas = document.getElementById('effect-canvas');
        const bgCtx = bgCanvas.getContext('2d');
        const effCtx = effCanvas.getContext('2d');
        
        let width, height;
        let isSuccess = false;
        let snowflakes = [];
        let successParticles = [];
        let explosionParticles = [];

        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            bgCanvas.width = width;
            bgCanvas.height = height;
            effCanvas.width = width;
            effCanvas.height = height;
        }

        window.addEventListener('resize', resize);
        resize();

        // --- é‚€è¯·é¡µèƒŒæ™¯: è½é›ª ---
        function createSnow() {
            snowflakes = [];
            for(let i=0; i<width/8; i++) {
                let depth = Math.random();
                snowflakes.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    r: depth * 4 + 1,
                    s: depth * 1.5 + 0.5,
                    o: depth * 0.5 + 0.1,
                    blur: (1-depth) * 4
                });
            }
        }

        // --- æˆåŠŸé¡µèƒŒæ™¯: çˆ±å¿ƒä¸é‡‘ç²‰ ---
        function createSuccessParticles() {
            successParticles = [];
            const colors = ['#D4AF37', '#F7EF8A', '#FFB6C1', '#FF69B4', '#FFFFFF'];
            for(let i=0; i<80; i++) {
                successParticles.push({
                    x: Math.random() * width,
                    y: height + Math.random() * 200,
                    size: Math.random() * 8 + 4,
                    speed: Math.random() * 1.2 + 0.6,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    type: Math.random() > 0.4 ? 'heart' : 'confetti',
                    rot: Math.random() * 360,
                    rs: Math.random() * 2 - 1
                });
            }
        }

        function drawHeart(ctx, x, y, size, color) {
            ctx.save();
            ctx.beginPath();
            ctx.fillStyle = color;
            ctx.translate(x, y);
            ctx.moveTo(0, 0);
            ctx.bezierCurveTo(0, -size/2, -size, -size/2, -size, 0);
            ctx.bezierCurveTo(-size, size/2, 0, size, 0, size*1.5);
            ctx.bezierCurveTo(0, size, size, size/2, size, 0);
            ctx.bezierCurveTo(size, -size/2, 0, -size/2, 0, 0);
            ctx.fill();
            ctx.restore();
        }

        function animate() {
            bgCtx.clearRect(0, 0, width, height);
            
            if (!isSuccess) {
                snowflakes.forEach(f => {
                    bgCtx.save();
                    bgCtx.globalAlpha = f.o;
                    if(f.blur > 1) bgCtx.filter = `blur(${f.blur}px)`;
                    bgCtx.fillStyle = '#fff';
                    bgCtx.beginPath();
                    bgCtx.arc(f.x, f.y, f.r, 0, Math.PI*2);
                    bgCtx.fill();
                    bgCtx.restore();

                    f.y += f.s;
                    if(f.y > height) {
                        f.y = -10;
                        f.x = Math.random() * width;
                    }
                });
            } else {
                successParticles.forEach(p => {
                    bgCtx.globalAlpha = 0.5;
                    if(p.type === 'heart') {
                        drawHeart(bgCtx, p.x, p.y, p.size/2, p.color);
                    } else {
                        bgCtx.save();
                        bgCtx.translate(p.x, p.y);
                        bgCtx.rotate(p.rot * Math.PI / 180);
                        bgCtx.fillStyle = p.color;
                        bgCtx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
                        bgCtx.restore();
                    }
                    p.y -= p.speed;
                    p.rot += p.rs;
                    if(p.y < -50) {
                        p.y = height + 50;
                        p.x = Math.random() * width;
                    }
                });
            }
            requestAnimationFrame(animate);
        }

        createSnow();
        animate();

        // --- äº¤äº’é€»è¾‘ ---
        const btnNo = document.getElementById('btn-no');
        function dodge() {
            if (isSuccess) return;
            const x = Math.random() * (width - 160) + 20;
            const y = Math.random() * (height - 60) + 20;
            btnNo.style.position = 'fixed';
            btnNo.style.left = x + 'px';
            btnNo.style.top = y + 'px';
            btnNo.style.zIndex = '1000';
        }
        btnNo.addEventListener('mouseenter', dodge);
        btnNo.addEventListener('touchstart', dodge);

        function acceptInvitation() {
            isSuccess = true;
            document.body.className = 'bg-success';
            document.getElementById('content-invite').classList.add('hidden');
            setTimeout(() => {
                document.getElementById('content-invite').style.display = 'none';
                document.getElementById('content-success').classList.remove('hidden');
            }, 600);
            
            createSuccessParticles();
            spawnCelebration();
        }

        // --- çƒŸèŠ±æ•ˆæœ ---
        function spawnCelebration() {
            const colors = ['#FF1493', '#D4AF37', '#FFFFFF', '#FFD700', '#FF69B4'];
            for(let i=0; i<150; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 12 + 2;
                explosionParticles.push({
                    x: width / 2,
                    y: height / 2,
                    vx: Math.cos(angle) * speed,
                    vy: Math.sin(angle) * speed,
                    life: 1,
                    color: colors[Math.floor(Math.random()*colors.length)],
                    size: Math.random() * 5 + 2
                });
            }
            updateExplosion();
        }

        function updateExplosion() {
            effCtx.clearRect(0, 0, width, height);
            explosionParticles = explosionParticles.filter(p => p.life > 0);
            explosionParticles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.2; // é‡åŠ›
                p.life -= 0.008;
                effCtx.globalAlpha = p.life;
                effCtx.fillStyle = p.color;
                effCtx.beginPath();
                effCtx.arc(p.x, p.y, p.size, 0, Math.PI*2);
                effCtx.fill();
            });
            if(explosionParticles.length > 0 || isSuccess) {
                if(isSuccess && Math.random() < 0.04) {
                    const x = Math.random() * width;
                    const y = Math.random() * height * 0.6;
                    for(let i=0; i<40; i++) {
                        const angle = Math.random() * Math.PI * 2;
                        const speed = Math.random() * 6 + 1;
                        explosionParticles.push({
                            x, y, vx: Math.cos(angle)*speed, vy: Math.sin(angle)*speed,
                            life: 1, color: '#F7EF8A', size: 2.5
                        });
                    }
                }
                requestAnimationFrame(updateExplosion);
            }
        }

        // --- å€’è®¡æ—¶ ---
        function updateCountdown() {
            const target = new Date(new Date().getFullYear(), 11, 24, 17, 20, 0).getTime();
            const now = Date.now();
            const diff = target - now;

            if (diff <= 0) {
                document.getElementById('countdown').innerHTML = `<p style="font-size:1.1rem; width:100%; color:var(--gold-light); font-weight:bold; letter-spacing:2px;">å¹³å®‰å¤œå¿«ä¹ï¼æœŸå¾…ä¸ä½ çš„çº¦ä¼š â¤ï¸</p>`;
                return;
            }

            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('days').innerText = d;
            document.getElementById('hours').innerText = String(h).padStart(2, '0');
            document.getElementById('mins').innerText = String(m).padStart(2, '0');
            document.getElementById('secs').innerText = String(s).padStart(2, '0');
        }
        setInterval(updateCountdown, 1000);
        updateCountdown();
    </script>
<!-- === éŸ³ä¹æ§åˆ¶ä»£ç  Start === -->
<audio id="bgMusic" loop preload="auto">
    <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
    // éŸ³ä¹æ’­æ”¾é€»è¾‘ï¼šå› ä¸ºæµè§ˆå™¨é™åˆ¶ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’åæ‰èƒ½æ’­æ”¾
    // æ‰€ä»¥è¿™é‡Œç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œå¥¹éšä¾¿ç‚¹ä¸€ä¸‹å±å¹•ï¼ŒéŸ³ä¹å°±å¼€å§‹äº†
    document.body.addEventListener('click', function() {
        var audio = document.getElementById('bgMusic');
        if (audio.paused) {
            audio.volume = 0.6; // éŸ³é‡è®¾ç½® 60%ï¼Œé˜²æ­¢å¤ªåµ
            audio.play();
        }
    }, { once: true }); // once:true è¡¨ç¤ºåªè§¦å‘ä¸€æ¬¡ï¼Œé¿å…é‡å¤è§¦å‘
</script>
<!-- === éŸ³ä¹æ§åˆ¶ä»£ç  End === -->
</body>
</html>


